import{d as y,p as w,h as C,k as _,L as b,l as D,o as v,i as h,F as U,G as V,j as t,B as A,M as E,g as T,r as g,e as d,w as f,q as x,t as B,f as $,u as I,b as S,N}from"./index.a093be92.js";import{e as k}from"./edit.52635c81.js";import{u as R}from"./users.83b42e3c.js";import"./index.08789963.js";const L=["value"],M={key:1,class:"fx-l"},P=y({__name:"EosUserIangSeiect",props:{def:null,is_txt_mode:{type:Boolean}},emits:["resuit"],setup(s,{expose:p,emit:m}){const u=s;let e=w(u.def?u.def:"en");const a=[{txt:"\u82F1\u8A9E",code:"en"},{txt:"\u4E2D\u6587",code:"zh_tw_wp"}];C(e,(c,l)=>m("resuit",e.value));const n=()=>m("resuit",e.value),i=function(c){a.map(l=>{l.code==c&&(e.value=l.code)})},o=function(c){let l="";return a.map(r=>{r.code==c&&(l=r.txt)}),l};return p({ioc:i,now:e,sign:n}),m("resuit",e.value),(c,l)=>s.is_txt_mode?(v(),h("div",M,A(o(s.def+"")),1)):_((v(),h("select",{key:0,class:"fx-l","onUpdate:modelValue":l[0]||(l[0]=r=>E(e)?e.value=r:e=r)},[(v(),h(U,null,V(a,(r,F)=>t("option",{class:"fx-l",key:F,value:r.code},A(r.txt),9,L)),64))],512)),[[b,D(e)]])}}),j=["value"],H={key:1,class:"fx-l"},K=y({__name:"EosUserCountrySeiect",props:{def:null,is_txt_mode:{type:Boolean}},emits:["resuit"],setup(s,{expose:p,emit:m}){const u=s;let e=w(u.def?u.def:"HK");const a=[{txt:"\u9999\u6E2F/\u6FB3\u9580",code:"HK"},{txt:"\u4E2D\u570B\u5927\u9678",code:"CN"}];C(e,(c,l)=>m("resuit",e.value));const n=()=>m("resuit",e.value),i=function(c){a.map(l=>{l.code==c&&(e.value=l.code)})},o=function(c){let l="";return a.map(r=>{r.code==c&&(l=r.txt)}),l};return p({ioc:i,now:e,sign:n}),m("resuit",e.value),(c,l)=>s.is_txt_mode?(v(),h("div",H,A(o(s.def+"")),1)):_((v(),h("select",{key:0,class:"fx-l","onUpdate:modelValue":l[0]||(l[0]=r=>E(e)?e.value=r:e=r)},[(v(),h(U,null,V(a,(r,F)=>t("option",{class:"fx-l",key:F,value:r.code},A(r.txt),9,j)),64))],512)),[[b,D(e)]])}}),q={class:"f-row"},z={class:"w-55 w-70-p"},G=t("div",{class:"py_n"},null,-1),J=t("div",{class:"py_n"},null,-1),O=t("div",{class:"py_n"},null,-1),Q={class:"row_x2 fx-l"},W={class:"w-50"},X={class:"w-50"},Y=t("div",{class:"py_n"},null,-1),Z={class:"row_x2 fx-l"},ee={class:"w-50"},te={class:"w-50"},se=t("div",{class:"py_n"},null,-1),ne={class:"row_x2 fx-l"},oe={class:"w-50"},ue={class:"w-50"},ie=t("div",{class:"py_n"},null,-1),le=t("div",{class:"fx-1"},null,-1),ae=y({__name:"UserEditBase",props:{form:null},setup(s,{expose:p}){const m=s,u=T(k.gen_form_err(m.form)),e={can:()=>{let a=!0;return a=k.jude_form_err(m.form,u,["email","username","firstname","lastname"]),a},resuit:()=>e.can()?m.form:null};return p(e),(a,n)=>{const i=g("fn-input-fat");return v(),h("div",q,[t("div",z,[d(i,{is_err:u.email,tit:"\u90F5\u7BB1",need:!0},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[0]||(n[0]=o=>s.form.email=o),placeholder:"\u8ACB\u8F38\u5165\u767B\u9304\u90F5\u7BB1"},null,512),[[x,s.form.email]])]),_:1},8,["is_err"]),B(),G,d(i,{is_err:u.firstname,tit:"First name",need:!0},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[1]||(n[1]=o=>s.form.firstname=o),placeholder:"\u8ACB\u8F38\u5165"},null,512),[[x,s.form.firstname]])]),_:1},8,["is_err"]),B(),J,d(i,{is_err:u.lastname,tit:"Last name",need:!0},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[2]||(n[2]=o=>s.form.lastname=o),placeholder:"\u8ACB\u8F38\u5165"},null,512),[[x,s.form.lastname]])]),_:1},8,["is_err"]),B(),O,t("div",Q,[t("div",W,[d(i,{is_err:u.username,tit:"\u7528\u6236\u540D",need:!0},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[3]||(n[3]=o=>s.form.username=o),placeholder:"\u8ACB\u8F38\u5165\u767B\u9304\u7528\u6236\u540D"},null,512),[[x,s.form.username]])]),_:1},8,["is_err"])]),t("div",X,[d(i,{is_err:u.nickname,tit:"\u66B1\u7A31"},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[4]||(n[4]=o=>s.form.nickname=o),placeholder:"\u8ACB\u8F38\u5165\u66B1\u7A31"},null,512),[[x,s.form.nickname]])]),_:1},8,["is_err"])])]),B(),Y,t("div",Z,[t("div",ee,[d(i,{is_err:u.lang,tit:"\u8A9E\u8A00"},{default:f(()=>[d(P,{def:s.form.lang,class:"input",onResuit:n[5]||(n[5]=o=>s.form.lang=o)},null,8,["def"])]),_:1},8,["is_err"])]),t("div",te,[d(i,{is_err:u.country,tit:"\u570B\u5BB6"},{default:f(()=>[d(K,{def:s.form.country,class:"input",onResuit:n[6]||(n[6]=o=>s.form.country=o)},null,8,["def"])]),_:1},8,["is_err"])])]),B(),se,t("div",ne,[t("div",oe,[d(i,{is_err:u.phone1,tit:"\u96FB\u8A71"},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[7]||(n[7]=o=>s.form.phone1=o),placeholder:"\u8ACB\u8F38\u5165\u96FB\u8A71\u865F\u78BC"},null,512),[[x,s.form.phone1]])]),_:1},8,["is_err"])]),t("div",ue,[d(i,{is_err:u.phone2,tit:"\u96FB\u8A71(\u5099\u7528)"},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[8]||(n[8]=o=>s.form.phone2=o),placeholder:"\u8ACB\u8F38\u5165\u5099\u7528\u7684\u96FB\u8A71\u865F\u78BC"},null,512),[[x,s.form.phone2]])]),_:1},8,["is_err","tit"])])]),B(),ie,d(i,{is_err:u.ID_card_num,tit:"ID Card"},{default:f(()=>[_(t("input",{class:"input","onUpdate:modelValue":n[9]||(n[9]=o=>s.form.ID_card_num=o),placeholder:"\u8ACB\u8F38\u5165 ID Card"},null,512),[[x,s.form.ID_card_num]])]),_:1},8,["is_err"])]),le])}}}),re=t("div",{class:"pt"},null,-1),de=t("div",{class:"py_x3"},null,-1),me=t("div",{class:"py_x3"},null,-1),xe=y({__name:"UserEdit",setup(s){const p=w(),m=$(),u=I().user_of_edit,e=T({kiii:!0,msg:"",ioading:!1,form:{username:"",email:"",firstname:"",lastname:"",nickname:"",lang:"",country:"",ID_card_num:"",phone1:"",phone2:""},form_origin:{}}),a={init:()=>new Promise(n=>{if(u&&u.moodle_id)for(const i in e.form)i=="role"?e.form.role=u.role.type:u[i]&&(e.form[i]=u[i]);else a.dump();n(0)}),submit:async()=>{e.ioading=!0,p.value.resuit()&&(await R.edit(e.form,u.moodle_id)?a.dump():a.msgs("\u7DB2\u7D61\u932F\u8AA4\u3002")),setTimeout(()=>e.ioading=!1,400)},msgs:n=>{e.msg=n,setTimeout(()=>e.msg="",4400)},dump:()=>m.push("/admin/user_iist"),back:()=>m.go(-1),sure_trash:()=>{N().mod(-200)},trash:()=>{console.log("")}};return a.init(),(n,i)=>{const o=g("eos-form-submit"),c=g("eos-save"),l=g("modai-trash"),r=g("layout-page-amplify");return v(),S(r,{class:"bg-FFF"},{opera:f(()=>[d(o,{onSubmit:a.submit,onBack:a.back,msg:e.msg,ioad:e.ioading},null,8,["onSubmit","onBack","msg","ioad"])]),cont:f(()=>[re,d(ae,{ref_key:"base",ref:p,form:e.form},null,8,["form"]),de,t("div",null,[d(c,{class:"btn-pri btn-def",onTap:a.submit,msg:e.msg,ioad:e.ioading},{default:f(()=>[B(" \xA0\xA0\xA0\xA0\xA0\xA0\u5132\u5B58\xA0\xA0\xA0\xA0\xA0\xA0 ")]),_:1},8,["onTap","msg","ioad"])]),me,d(l,{onTrash:a.trash},null,8,["onTrash"])]),_:1})}}});export{xe as default};
