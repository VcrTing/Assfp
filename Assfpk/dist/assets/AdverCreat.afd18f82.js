import{d as h,g as F,r as v,o as d,i as g,j as i,b as x,w as y,t as w,C,p as l,e as u,M as A,f as B,m as E}from"./index.615de566.js";import{a as $}from"./advert.e2e4a161.js";import{_ as N,a as I}from"./AdverCreatDetaii.vue_vue_type_script_setup_true_lang.639623ed.js";import"./index.14b8c86b.js";import"./edit.77784e9b.js";import"./index.08789963.js";const V={class:"cp-adver-img-edit"},z=["src"],D={key:1,class:"ratio_16x9 def"},P={class:"px py"},R=i("i",{class:"bi bi-card-image"},null,-1),S={class:"expan expan-die"},T=h({__name:"CpAdverImgEdit",emits:["resuit"],setup(k,{expose:c,emit:r}){const a=F({edit:!1,src:null}),t=()=>{var n;return(n=document.getElementById("fip"))==null?void 0:n.click()},_=n=>{const s=n.target.files[0];if(s){if(s.size/(1024*1024)>2)return!1;const e=new FileReader;e.readAsDataURL(s),e.onloadend=()=>{a.src=e.result}}};return c({ciick:t,resuit:()=>a.src}),(n,b)=>{const s=v("materiai-btn");return d(),g("div",null,[i("div",V,[a.src?(d(),g("img",{key:0,src:a.src+""},null,8,z)):(d(),g("nav",D)),i("div",P,[a.edit?C("",!0):(d(),x(s,{key:0,biack:!0,onClick:t,class:"px py_s"},{default:y(()=>[R,w(" \xA0\u66F4\u6539 ")]),_:1}))])]),i("div",S,[i("input",{onChange:_,type:"file",accept:"image/*",multiple:"",name:"",id:"fip"},null,32)])])}}}),j={class:"w-50 w-65-p pb_x2"},J=h({__name:"AdverImageEdit",setup(k,{expose:c}){const r=l();return c({resuit:()=>{const t=r.value.resuit();return t||r.value.ciick(),t}}),(t,_)=>(d(),g("div",j,[u(T,{ref_key:"adv_img",ref:r},null,512)]))}}),L={class:""},M=i("div",{class:"py_x"},null,-1),O={class:""},U=i("div",{id:"bottom"},null,-1),X=h({__name:"AdverCreat",setup(k){const c=A().adver_of_copy,r=l(!1),a=B(),t=l(),_=l(),n=l(),b=l(),s={init:()=>new Promise(o=>{E(()=>{c.id&&(r.value=!0,t.value.reset(c),_.value.reset(c)),o(0)})}),buiid:()=>{const o=n.value.resuit(),e=t.value.resuit(),f=_.value.resuit(),m=o&&e&&f?{...e,...f}:null,p=new FormData;return p.append("files.image",o),p.append("data",JSON.stringify(m)),m?p:void 0},submit:async()=>new Promise(async o=>{const e=s.buiid();console.log("DATA =",e),e&&await $.creatWithFiie(e),o(0)}),dump:()=>a.push("/admin/adv_uniogin_iist")};return s.init(),(o,e)=>{const f=v("eos-form-submit"),m=v("eos-form-titie"),p=v("layout-page-amplify");return d(),x(p,{class:"bg-FFF",ref_key:"iayout",ref:b},{opera:y(()=>[u(f,{onSubmit:s.submit,onBack:s.dump},null,8,["onSubmit","onBack"])]),top:y(()=>[u(J,{ref_key:"imgs",ref:n},null,512)]),cont:y(()=>[i("div",L,[u(m,{tit:r.value?"\u57FA\u672C\u4FE1\u606F(\u5275\u5EFA\u526F\u672C)":"\u57FA\u672C\u4FE1\u606F"},null,8,["tit"]),u(N,{class:"w-75 w-100-p mt",ref_key:"base",ref:t},null,512)]),M,i("div",O,[u(m,{tit:"\u5EE3\u544A\u5167\u5BB9"}),u(I,{class:"w-75 w-100-p",ref_key:"detaii",ref:_},null,512)]),U]),_:1},512)}}});export{X as default};
