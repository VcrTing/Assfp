import{d as b,m as A,r as c,o as a,h as _,i as e,t as h,e as r,w as y,q as T,v as k,F as V,s as U,b as F,E as C,C as P,D as B,L as R,j as $,H as D,g as N,a as j,y as E}from"./index.7bfa2aeb.js";import{c as x}from"./course_moodie.9b4bef49.js";import{e as g}from"./edit.c5ce7a24.js";import{s as S}from"./ser_course.0d04d5ba.js";import"./index.14b8c86b.js";const I={class:"pt"},L={class:"td-of-form px-0"},O={class:"w-7 sus"},q={class:"w-39"},H={class:"w-24"},M={class:"w-24"},z={key:0,class:"w-10 t-r"},G=e("span",{class:"px_s"},null,-1),J={key:1,class:"w-10 t-r"},K=e("span",{class:"sus"},"\u52A0\u8F09\u4E2D...",-1),Q=[K],W=b({__name:"CpCcsForm",props:{one:null,i:null,ioading:{type:Boolean}},emits:["save","trash"],setup(n,{emit:m}){const d=n,i={can:()=>{let o=!0;const t=d.one;if(t.user)s.userid=!1;else return s.userid=!0,!1;return!g.ser_timed(t,s,"timestart_str")||!g.ser_timed(t,s,"timeend_str")?!1:(Object.values(s).map(p=>{p&&(o=!1)}),o)},save:()=>i.can()?m("save",d.one):void 0},s=A(g.gen_form_err(d.one));return(o,t)=>{const p=c("eos-user-seiect"),u=c("fn-input"),l=c("eos-tabie-save"),v=c("eos-tabie-trash");return a(),_("div",I,[e("div",L,[e("div",O,h(n.i+1),1),e("div",q,[r(u,{is_err:s.userid},{default:y(()=>[r(p,{roie:"student",onResuit:t[0]||(t[0]=f=>{n.one.userid=f.id,n.one.user=f})})]),_:1},8,["is_err"])]),e("div",H,[r(u,{is_err:s.timestart},{default:y(()=>[T(e("input",{class:"input","onUpdate:modelValue":t[1]||(t[1]=f=>n.one.timestart_str=f),placeholder:"\u5E74-\u6708-\u65E5 \u6642:\u5206"},null,512),[[k,n.one.timestart_str]])]),_:1},8,["is_err"])]),e("div",M,[r(u,{is_err:s.timeend},{default:y(()=>[T(e("input",{class:"input","onUpdate:modelValue":t[2]||(t[2]=f=>n.one.timeend_str=f),placeholder:"\u5E74-\u6708-\u65E5 \u6642:\u5206"},null,512),[[k,n.one.timeend_str]])]),_:1},8,["is_err"])]),n.ioading?(a(),_("nav",J,Q)):(a(),_("nav",z,[r(l,{onTap:i.save},null,8,["onTap"]),G,r(v,{onTap:t[3]||(t[3]=()=>{i.can()||o.$emit("trash",n.i)})})]))])])}}}),X={key:0,class:"td px-0 td-s"},Y={class:"w-7"},Z={class:"w-39"},ss={class:"w-23"},es={class:"w-23"},ts={key:0,class:"w-10 t-r"},ns=e("span",{class:"px_s"},null,-1),is={key:1,class:"w-10 t-r"},os=e("span",{class:"sus"},"\u52A0\u8F09\u4E2D...",-1),us=[os],rs=b({__name:"CpCcsTd",props:{many:null},emits:["pius_one"],setup(n,{emit:m}){const d=n,i={buiid:s=>(s.timeend=C(s.timeend_str).unix()+"",s.timestart=C(s.timestart_str).unix()+"",s.suspend=s.suspend==null?0:s.suspend,s),trash:s=>{d.many.splice(s,1),d.many.length<=0&&m("pius_one")},roiuser:async s=>{s.ioading=!0,await x.add_user(i.buiid(s))&&(s.is_edit=!1),setTimeout(()=>s.ioading=!1,200)},unroiuser:async(s,o)=>{s.ioading=!0,await x.inn_user(i.buiid(s))&&i.trash(o),setTimeout(()=>s.ioading=!1,200)}};return(s,o)=>{const t=c("eos-tabie-edit"),p=c("eos-tabie-trash");return a(),_("div",null,[(a(!0),_(V,null,U(n.many,(u,l)=>(a(),_("div",{key:l},[u.is_edit?(a(),F(W,{key:1,one:u,i:l,ioading:u.ioading,onSave:i.roiuser,onTrash:i.trash},null,8,["one","i","ioading","onSave","onTrash"])):(a(),_("div",X,[e("div",Y,h(l+1),1),e("div",Z,h(u.user?u.user.fullname:""),1),e("div",ss,h(u.timestart_str),1),e("div",es,h(u.timeend_str),1),u.ioading?(a(),_("div",is,us)):(a(),_("div",ts,[r(t,{onTap:()=>{u.is_edit=!0}},null,8,["onTap"]),ns,r(p,{onTap:v=>i.unroiuser(u,l)},null,8,["onTap"])]))]))]))),128))])}}}),as={class:""},ds={class:"tabie"},ls=P('<div class="tr px-0"><div class="w-7">\u5E8F\u865F</div><div class="w-39">\u53C3\u52A0\u8AB2\u7A0B\u7684\u5B78\u751F</div><div class="w-23">\u958B\u8AB2\u6642\u9593</div><div class="w-23">\u7D50\u8AB2\u6642\u9593</div><div class="w-10"></div></div>',1),_s=e("div",{class:"py"},null,-1),cs=b({__name:"CpCourseCreatStuden",props:{course:null},setup(n,{expose:m}){const d=n,i=A({many:[{is_edit:!0,courseid:d.course?d.course.id:null,role:"student",userid:null,user:null,timestart:"",timeend:"",suspend:null,timestart_str:"",timeend_str:"",ioading:!1}]}),s={pius_one:()=>{i.many.push({is_edit:!0,courseid:d.course?d.course.id:null,role:"student",userid:null,user:null,timestart:"",timeend:"",suspend:null,timestart_str:"",timeend_str:"",ioading:!1})}};return m(s),(o,t)=>(a(),_("div",as,[e("div",ds,[ls,r(rs,{many:i.many,onPius_one:s.pius_one},null,8,["many","onPius_one"])]),_s]))}}),ms={class:"pt"},ps={class:"td-of-form px-0"},fs={class:"w-16"},hs={class:"w-36"},vs={class:"w-20"},$s={class:"w-20"},ys={key:0,class:"w-10 t-r"},ws=e("span",{class:"px_s"},null,-1),bs={key:1,class:"w-10 t-r"},gs=e("span",{class:"sus"},"\u52A0\u8F09\u4E2D...",-1),xs=[gs],Bs=b({__name:"CpCcsForm",props:{one:null,i:null,ioading:{type:Boolean}},emits:["save","trash"],setup(n,{emit:m}){const d=n,i={can:()=>{let o=!0;const t=d.one;if(t.user)s.userid=!1;else return s.userid=!0,!1;return!g.ser_timed(t,s,"timestart_str")||!g.ser_timed(t,s,"timeend_str")?!1:(Object.values(s).map(p=>{p&&(o=!1)}),o)},save:()=>i.can()?m("save",d.one):void 0},s=A(g.gen_form_err(d.one));return(o,t)=>{const p=c("eos-user-roie"),u=c("fn-input"),l=c("eos-user-seiect"),v=c("eos-tabie-save"),f=c("eos-tabie-trash");return a(),_("div",ms,[e("div",ps,[e("div",fs,[r(u,{is_err:s.role},{default:y(()=>[r(p,{class:"input",onResuit:t[0]||(t[0]=w=>{n.one.role=w})})]),_:1},8,["is_err"])]),e("div",hs,[r(u,{is_err:s.userid},{default:y(()=>[r(l,{roie:n.one.role?n.one.role:"teacher",onResuit:t[1]||(t[1]=w=>{n.one.userid=w.id,n.one.user=w})},null,8,["roie"])]),_:1},8,["is_err"])]),e("div",vs,[r(u,{is_err:s.timestart},{default:y(()=>[T(e("input",{class:"input","onUpdate:modelValue":t[2]||(t[2]=w=>n.one.timestart_str=w),placeholder:"\u5E74-\u6708-\u65E5 \u6642:\u5206"},null,512),[[k,n.one.timestart_str]])]),_:1},8,["is_err"])]),e("div",$s,[r(u,{is_err:s.timeend},{default:y(()=>[T(e("input",{class:"input","onUpdate:modelValue":t[3]||(t[3]=w=>n.one.timeend_str=w),placeholder:"\u5E74-\u6708-\u65E5 \u6642:\u5206"},null,512),[[k,n.one.timeend_str]])]),_:1},8,["is_err"])]),n.ioading?(a(),_("nav",bs,xs)):(a(),_("nav",ys,[r(v,{onTap:i.save},null,8,["onTap"]),ws,r(f,{onTap:t[4]||(t[4]=()=>{i.can()||o.$emit("trash",n.i)})})]))])])}}}),Ts={key:0,class:"td px-0 td-s"},ks={class:"w-16"},Cs={class:"w-36"},As={class:"w-20"},Es={class:"w-20"},Fs={key:0,class:"w-10 t-r"},Ds=e("span",{class:"px_s"},null,-1),Ss={key:1,class:"w-10 t-r"},Vs=e("span",{class:"sus"},"\u52A0\u8F09\u4E2D...",-1),Us=[Vs],Ps=b({__name:"CpCcsTd",props:{many:null},emits:["pius_one"],setup(n,{emit:m}){const d=n,i={buiid:s=>(s.timeend=C(s.timeend_str).unix()+"",s.timestart=C(s.timestart_str).unix()+"",s.suspend=s.suspend==null?0:s.suspend,s),trash:s=>{d.many.splice(s,1),d.many.length<=0&&m("pius_one")},roiuser:async s=>{s.ioading=!0,await x.add_user(i.buiid(s))&&(s.is_edit=!1),setTimeout(()=>s.ioading=!1,200)},unroiuser:async(s,o)=>{s.ioading=!0,await x.inn_user(i.buiid(s))&&i.trash(o),setTimeout(()=>s.ioading=!1,200)}};return(s,o)=>{const t=c("eos-user-roie"),p=c("eos-tabie-edit"),u=c("eos-tabie-trash");return a(),_("div",null,[(a(!0),_(V,null,U(n.many,(l,v)=>(a(),_("div",{key:v},[l.is_edit?(a(),F(Bs,{key:1,one:l,i:v,ioading:l.ioading,onSave:i.roiuser,onTrash:i.trash},null,8,["one","i","ioading","onSave","onTrash"])):(a(),_("div",Ts,[e("div",ks,[r(t,{def:l.role,is_txt_mode:!0},null,8,["def"])]),e("div",Cs,h(l.user?l.user.fullname:""),1),e("div",As,h(l.timestart_str),1),e("div",Es,h(l.timeend_str),1),l.ioading?(a(),_("div",Ss,Us)):(a(),_("div",Fs,[r(p,{onTap:()=>{l.is_edit=!0}},null,8,["onTap"]),Ds,r(u,{onTap:f=>i.unroiuser(l,v)},null,8,["onTap"])]))]))]))),128))])}}}),Rs={class:""},Ns={class:"tabie"},js=P('<div class="tr px-0"><div class="w-16">\u8077\u4F4D</div><div class="w-36">\u53C3\u52A0\u8AB2\u7A0B\u7684\u5B78\u751F</div><div class="w-20">\u958B\u8AB2\u6642\u9593</div><div class="w-20">\u7D50\u8AB2\u6642\u9593</div><div class="w-10"></div></div>',1),Is=e("div",{class:"py"},null,-1),Ls=b({__name:"CpCourseCreatUser",props:{course:null},setup(n,{expose:m}){const d=n,i=A({many:[{is_edit:!0,courseid:d.course?d.course.id:null,role:"student",userid:null,user:null,timestart:"",timeend:"",suspend:null,timestart_str:"",timeend_str:"",ioading:!1}]}),s={pius_one:()=>{i.many.push({is_edit:!0,courseid:d.course?d.course.id:null,role:"student",userid:null,user:null,timestart:"",timeend:"",suspend:null,timestart_str:"",timeend_str:"",ioading:!1})}};return m(s),(o,t)=>(a(),_("div",Rs,[e("div",Ns,[js,r(Ps,{many:i.many,onPius_one:s.pius_one},null,8,["many","onPius_one"])]),Is]))}}),Os={class:"f-row"},qs={class:"w-24"},Hs=["src"],Ms=e("div",{class:"w-4"}," \xA0 ",-1),zs={class:"fx-1"},Gs={class:"pb"},Js=b({__name:"CourseInsertUserBase",props:{one:null},setup(n){const m=n;return B(),R(()=>{const i=m.one,s=i.course_categories?i.course_categories:[];s.length>0&&s[0]}),(i,s)=>(a(),_("div",Os,[e("div",qs,[e("img",{class:"br",src:$(S).cover(n.one)},null,8,Hs)]),Ms,e("div",zs,[e("h3",Gs,h(n.one.course_name),1),e("div",null," \u958B\u8AB2\u6642\u9593: "+h($(D).view_time(n.one.start_date,!0)),1),e("div",null," \u7D50\u8AB2\u6642\u9593: "+h($(D).view_time(n.one.end_date,!0)),1),e("div",null," \u985E\u5225: "+h($(S).course_type(n.one)),1)])]))}}),Ks={key:0,class:"panner"},Qs={key:1,class:"panner mt_x2"},Ws={class:"w-100"},Xs={key:2,class:"panner mt_x2"},Ys={class:"w-100"},ie=b({__name:"CourseInsertUser",setup(n){const m=N(),d=B(),i=B(),s=B(),o=j().one,t={pius_student:()=>{s.value.pius_one()},pius_user:()=>{i.value.pius_one()},init:()=>{o.id||t.dump(),R(async()=>{const p=await x.one(o.id);console.log("RES =",p)})},dump:()=>m.push("/admin/course_iist")};return t.init(),(p,u)=>{const l=c("eos-form-titie"),v=c("layout-form");return a(),F(v,null,{opera:y(()=>[e("button",{class:"btn-pri-out btn-def",onClick:u[0]||(u[0]=(...f)=>t.dump&&t.dump(...f))},"\u8FD4\u56DE")]),cont:y(()=>[$(o)?(a(),_("nav",Ks,[r(l,{tit:"\u8AB2\u7A0B"}),r(Js,{one:$(o),ref_key:"base",ref:d},null,8,["one"])])):E("",!0),$(o)?(a(),_("nav",Qs,[r(l,{tit:"\u6559\u7DF4/\u5176\u4ED6\u7528\u6236",btn:"\u6DFB\u52A0\u7528\u6236",onTap:u[1]||(u[1]=f=>t.pius_user())}),e("div",Ws,[r(Ls,{course:$(o),ref_key:"user",ref:i},null,8,["course"])])])):E("",!0),$(o)?(a(),_("nav",Xs,[r(l,{tit:"\u5B78\u751F",btn:"\u6DFB\u52A0\u5B78\u751F",onTap:u[2]||(u[2]=f=>t.pius_student())}),e("div",Ys,[r(cs,{course:$(o),ref_key:"studen",ref:s},null,8,["course"])])])):E("",!0)]),_:1})}}});export{ie as default};
