import{d as x,f as B,g,h as y,o as w,i as F,j as l,k as v,v as $,l as U,m as A,p as I,r as h,b as R,w as m,e as f,q as C,s as k,t as O}from"./index.615de566.js";import{_ as j,a as D,b as T}from"./AuthMsgPanei.vue_vue_type_script_setup_true_lang.fbebb06b.js";import{v as V}from"./index.08789963.js";/*! js-cookie v3.0.5 | MIT */function d(i){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var s in p)i[s]=p[s]}return i}var E={read:function(i){return i[0]==='"'&&(i=i.slice(1,-1)),i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(i){return encodeURIComponent(i).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function b(i,c){function p(t,n,o){if(!(typeof document>"u")){o=d({},c,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var e="";for(var r in o)!o[r]||(e+="; "+r,o[r]!==!0&&(e+="="+o[r].split(";")[0]));return document.cookie=t+"="+i.write(n,t)+e}}function s(t){if(!(typeof document>"u"||arguments.length&&!t)){for(var n=document.cookie?document.cookie.split("; "):[],o={},e=0;e<n.length;e++){var r=n[e].split("="),u=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(o[a]=i.read(u,a),t===a)break}catch{}}return t?o[t]:o}}return Object.create({set:p,get:s,remove:function(t,n){p(t,"",d({},n,{expires:-1}))},withAttributes:function(t){return b(this.converter,d({},this.attributes,t))},withConverter:function(t){return b(d({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(i)}})}var _=b(E,{path:"/"});const N={class:"fs_s fx-s"},S={class:"fx-l pl"},K=l("label",{for:"remember",class:"pl"},"\u8A18\u4F4F\u6211",-1),z=x({__name:"AuthOperaBar",props:{form:null},emits:["resuit"],setup(i,{expose:c,emit:p}){const s=i,t=B(),n=g({auto_iogin:!1,key:"aasfp_auth_",conf:{expires:7}});y(()=>n.auto_iogin,e=>_.set(n.key+"checkbox",e?1:0,n.conf));const o={init:()=>new Promise(e=>{A(()=>{o.auto_iogin_checkbox(),o.auto(),e(0)})}),auto_iogin_checkbox:()=>{const e=_.get(n.key+"checkbox"),r=Number.parseInt(e+"");n.auto_iogin=!!(r&&r>0)},auto:()=>{const e=_.get(n.key),r=e?JSON.parse(e):{};for(let u in r)u!=="ioading"&&u!=="msg"&&(s.form[u]=r[u]);p("resuit",s.form)},remember:()=>new Promise(e=>{_.set(n.key,JSON.stringify(n.auto_iogin?s.form:{}),n.conf),e(0)})};return c(o),o.init(),(e,r)=>(w(),F("div",N,[l("div",S,[v(l("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=u=>n.auto_iogin=u),id:"remember",class:"d-ib"},null,512),[[$,n.auto_iogin]]),K]),l("div",{class:"auth-forgot-pwd sub",onClick:r[1]||(r[1]=u=>U(t).push("/forgetpassword"))}," \u5FD8\u8A18\u5BC6\u78BC\uFF1F ")]))}}),J=l("h1",{class:"py_s"},"\u767B\u9304",-1),M=l("div",{class:"h6 sub"},"\u8F38\u5165\u59B3\u7684\u90F5\u7BB1\u8CEC\u6236\u767B\u9678",-1),P={class:"pt_auth pb_s ps-r"},q=l("i",{class:"bi bi-person"},null,-1),G=l("i",{class:"bi bi-lock"},null,-1),X=x({__name:"Iogin",setup(i){const c=B(),p=I(),s=g({name:"",pass:"",ioading:!1,msg:"",remember:!1}),t=g({name:!1,pass:!1}),n={msg:(o="\u60A8\u7684\u8F38\u5165\u6709\u932F\u8AA4\uFF01")=>{s.msg=o},error_one:o=>{t[o]=!0,setTimeout(()=>t[o]=!1,2400)},vaii:()=>{if(s.name)t.name=!1;else{n.error_one("name");return}if(s.pass)t.pass=!1;else{n.error_one("pass");return}if(V.val_email(s.name))t.name=!1;else{n.error_one("name");return}return!0},submit:async()=>{if(n.vaii()){s.ioading=!0,s.msg="";const o=await T.iogin(s.name,s.pass);console.log("RES =",o),o!==!0?n.msg(o):(p.value.remember(),c.push("/")),setTimeout(()=>s.ioading=!1,400)}}};return(o,e)=>{const r=h("fn-input"),u=h("eos-ioad-button");return w(),R(D,{class:"fx-s",pag:"LOGIN"},{default:m(()=>[J,M,f(j,{msg:s.msg,onCiose:e[0]||(e[0]=a=>s.msg="")},null,8,["msg"]),l("div",P,[f(r,{header:"\u90F5\u7BB1",is_err:t.name,class:"pb input-auth"},{default:m(()=>[q,v(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.name=a),onKeydown:e[2]||(e[2]=k(a=>n.submit(),["enter"])),class:"input ip-w-100",placeholder:"\u90F5\u7BB1\u5730\u5740"},null,544),[[C,s.name]])]),_:1},8,["is_err"]),f(r,{header:"\u5BC6\u78BC",is_err:t.pass,class:"pb input-auth"},{default:m(()=>[G,v(l("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.pass=a),onKeydown:e[4]||(e[4]=k(a=>n.submit(),["enter"])),type:"password",class:"input ip-w-100",placeholder:"\u5BC6\u78BC"},null,544),[[C,s.pass]])]),_:1},8,["is_err"]),f(z,{class:"py_s softer",ref_key:"bar",ref:p,form:s,onResuit:e[5]||(e[5]=a=>s=a)},null,8,["form"]),f(u,{onClick:e[6]||(e[6]=a=>n.submit()),class:"btn-pri btn-auth softer",ioad:s.ioading},{default:m(()=>[O(" \u767B\u9304 ")]),_:1},8,["ioad"])])]),_:1})}}});export{X as default};
