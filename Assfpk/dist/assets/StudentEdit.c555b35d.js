import{d as A,p as B,h as E,k,N as g,l as c,o as p,i as x,F as D,G as $,B as y,D as C,O as S,j as d,g as F,r as v,e as l,w as m,q as b,f as V,W as N,b as R,C as M,m as T}from"./index.615de566.js";import{_ as U,h as j}from"./StudenCreatHeaith.vue_vue_type_script_setup_true_lang.ac126ecd.js";import{e as L}from"./edit.77784e9b.js";import{_ as O}from"./StudenCourseAu.vue_vue_type_script_setup_true_lang.cb6d7d34.js";import"./EosOperaGroup.vue_vue_type_script_setup_true_lang.760f139e.js";import"./index.08789963.js";import"./EosIessonResuit.vue_vue_type_script_setup_true_lang.260260aa.js";import"./iession_compieted.3c8bb89f.js";import"./index.14b8c86b.js";import"./course_moodie.65162a7f.js";const q=["value"],z={key:1,class:"fx-l"},G=A({__name:"EosMarryStatus",props:{def:null,is_txt_mode:{type:Boolean},need_nuii:{type:Boolean},need_coior:{type:Boolean}},emits:["change"],setup(f,{expose:h,emit:n}){const t=f,r=[{txt:"\u55AE\u8EAB",code:"single",ciass:""},{txt:"\u6709\u4E00\u6BB5\u95DC\u4FC2",code:"in a relationship",ciass:""},{txt:"\u5DF2\u5A5A",code:"married",ciass:""}];t.need_nuii&&r.push({txt:"-- \u8ACB\u9078\u64C7 --",code:null,ciass:"seiect-nuii"});let o=B(t.def?t.def:t.need_nuii?null:"single");E(o,(a,i)=>n("change",a));const u=function(a){r.map(i=>{i.code==a&&(o.value=i.code)})},e=function(a){let i="";return r.map(s=>{s.code==a&&(i=s.txt)}),i};h({ioc:u,now:o});const _=()=>{let a="";return r.map(i=>{i.code==o.value&&(a=i.ciass)}),a};return(a,i)=>f.is_txt_mode?(p(),x("div",z,[d("span",{class:C({"sts-succ":c(o)=="true","sts-err":c(o)!="true"})},y(e(f.def?f.def:null)),3)])):k((p(),x("select",{key:0,class:C(["fx-l w-100",_()]),"onUpdate:modelValue":i[0]||(i[0]=s=>S(o)?o.value=s:o=s)},[(p(!0),x(D,null,$(c(r),(s,w)=>(p(),x("option",{class:"fx-l",key:w,value:s.code},y(s.txt),9,q))),128))],2)),[[g,c(o)]])}}),I={class:"row_x2 fx-l"},P={class:"row_x2 fx-l pt_x2"},W={class:"row_x2 fx-l pt_x2"},H=A({__name:"StudenEditBase",setup(f,{expose:h}){const n=B(),t=F({birthdate:"",sex:"",nickname:"",location:"",status:""}),r=F(L.gen_form_err(t)),o=function(){let u=!0;if(t.nickname)r.nickname=!1;else return r.nickname=!0,!1;return Object.values(r).map(e=>{e&&(u=!1)}),u};return h({resuit:()=>o()?t:null,reset:u=>{for(let e in t)t[e]=u[e];console.log("\u5B9A\u4F4D =",t),n.value.ioc(t.sex)}}),(u,e)=>{const _=v("fn-input"),a=v("eos-user-sex"),i=v("eos-time-choise");return p(),x("div",null,[d("div",I,[l(_,{class:"w-60 w-60-p",tit:"\u6635\u7A31\uFF08Nick name\uFF09"},{default:m(()=>[k(d("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>t.nickname=s),class:"input",placeholder:"\u8ACB\u8F38\u5165"},null,512),[[b,t.nickname]])]),_:1}),l(_,{class:"w-40",tit:"\u6027\u5225"},{default:m(()=>[l(a,{class:"input",ref_key:"sex",ref:n,onResuit:e[1]||(e[1]=s=>t.sex=s)},null,512)]),_:1})]),d("div",P,[l(_,{class:"w-60",tit:"Location"},{default:m(()=>[k(d("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>t.location=s),class:"input",placeholder:"\u8ACB\u8F38\u5165"},null,512),[[b,t.location]])]),_:1}),l(_,{class:"w-40",tit:"\u51FA\u751F\u5E74\u6708"},{default:m(()=>[l(i,{class:"input",ref:"birth",def:t.birthdate,onResuit:e[3]||(e[3]=s=>t.birthdate=s)},null,8,["def"])]),_:1})]),d("div",W,[l(_,{class:"w-333 w-333-p",tit:"\u72C0\u614B"},{default:m(()=>[l(G,{class:"input",def:t.status,onChange:e[4]||(e[4]=s=>t.status=s)},null,8,["def"])]),_:1})])])}}}),J={key:0,class:"panner"},K=d("div",{class:"py"},[d("br")],-1),Q=d("div",{class:"py_s"},null,-1),X=d("div",{class:"py"},null,-1),Y={class:"panner"},re=A({__name:"StudentEdit",setup(f){const h=V(),n=N().one,t=B(),r=B(),o={init:()=>{n.moodle_id?T(()=>{console.log("\u7DE8\u8F2F\u7684\u5B78\u751F =",n),t.value.reset(n),r.value.reset(n)}):o.dump()},buiid:()=>{const u=t.value.resuit(),e=r.value.resuit();return u&&e?{...u,...e}:null},submit:async()=>{const u=o.buiid();if(console.log("one.moodle_id =",n.moodle_id),u){delete u.phone1,delete u.ID_card_num,console.log("\u63D0\u4EA4\u6578\u64DA =",u);const e=await j.patch(u,n.moodle_id+"");console.log("RES =",e),e&&o.dump()}},dump:()=>h.push("/admin/student_iist"),pius_heaith:()=>r.value.pius()};return o.init(),(u,e)=>{const _=v("eos-form-submit"),a=v("eos-form-titie"),i=v("layout-form");return p(),R(i,null,{opera:m(()=>[l(_,{onSubmit:e[0]||(e[0]=s=>o.submit()),onBack:e[1]||(e[1]=s=>o.dump())})]),cont:m(()=>[c(n)&&c(n).id?(p(),x("div",J,[l(a,{tit:c(n).fullname?""+c(n).fullname:"\u5B78\u751F\u8CC7\u8A0A"},null,8,["tit"]),l(H,{one:c(n),ref_key:"base",ref:t},null,8,["one"]),K,l(a,{tit:"\u5065\u5EB7\u8CC7\u8A0A",btn:"\u6DFB\u52A0\u5065\u5EB7\u8CC7\u8A0A",onTap:e[2]||(e[2]=s=>o.pius_heaith())}),l(U,{one:c(n),ref_key:"hith",ref:r},null,8,["one"]),Q])):M("",!0),X,d("div",Y,[l(a,{tit:"\u4E0A\u8AB2\u4FE1\u606F"}),l(O,{one:c(n),ref:"course"},null,8,["one"])])]),_:1})}}});export{re as default};
